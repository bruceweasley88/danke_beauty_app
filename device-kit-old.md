# AI面膜小程序产品协议说明2511

## 1.%2.%3.%4.%5. 蓝牙通信信息

| BLE 基本信息 | BLE 基本信息       |
| ------------ | ------------------ |
| 产品名称     | AI 面膜            |
| 连接方式     | BLE 直连-标准      |
| 蓝牙广播名称 | AIMASK             |
| 产品短PID    | 0x0001             |

## 2.%2.%3.%4.%5. 数据点定义

BLE 数据点定义表格-锐科 AI 面膜

![img](数据点配置)

| DPID   | DPTypeID | 数据点中文名称   | 数值范围                | 数据点权限 |
| ------ | -------- | ---------------- | ----------------------- | ---------- |
| DP001  | Uint8    | 按摩强度         | 0-100，步长：1           | 写、上报   |
| DP002  | Uint8    | 护肤模式         | 0：关闭旋转；1：模式1；2：模式2；3：模式3 | 写、上报   |
| DP003  | -        | 预留             | -                       | -          |
| DP004  | -        | 预留             | -                       | -          |
| DP005  | Uint8    | 电量信息         | 0-100%                   | 上报       |
| DP006  | Uint8    | 启动/停止状态    | 0：停止；1：启动         | 写、上报   |
| DP200  | Bool     | 查询设备状态     | 1：设备全量上报当前状态  | 写         |

## 3.%2.%3.%4.%5. 测试APP下发数据单元内容

串口协议文档：广云物联 蓝牙模组十六进制串口通讯方案手册v1.0.pdf

例如：震动强度：79；震动模式：3；电击强度：39；电击模式：10

下发的数据内容单元为：`04 00 01 11 4F 00 02 11 03 00 03 11 27 00 04 11 0A`

其中：
- 04 为下发的dpip数量
- 00 01 为DP001，代表震动强度
- 11 为数据类型，uint8
- 4F 为震动强度值
- 00 02 为DP002，代表震动模式
- 11 为数据类型，uint8
- 03 为震动模式值
- 00 03 为DP003，代表电击强度
- 11 为数据类型，uint8
- 27 为电击强度值
- 00 04 为DP004，代表电击模式
- 11 为数据类型，uint8
- 0A 为电击模式值

## 4.%2.%3.%4.%5. APP 下发测试用例

### 电量查询用例

APP 下发 DP005 ，值为 0 的指令，即为电量查询指令：`01 00 05 11 00`

设备将回复 DP005 的值

#### 电量显示
- 51-100%：绿色
- 20-50%：黄色
- <20%：红色

上报电量 1%：`55 AA 00 00 05 01 00 05 11 01 1C FE`